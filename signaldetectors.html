<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- change title -->
    <title>Ahmed Alazzawi - Signal Sensors</title>
    <link rel="icon" href="img/icons8-rocket-64.png" type="image/x-icon">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="ionicons/css/ionicons.min.css" rel="stylesheet">
    <link href="css/animate.min.css" rel="stylesheet">
    <link href="css/aos.css" rel="stylesheet">
    <!-- main style -->
    <link href="css/style.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <!-- Preloader -->
    <div id="preloader">
        <div id="status">

            <div class="preloader" aria-busy="true" aria-label="Loading, please wait." role="progressbar">
            </div>

        </div>
    </div>
    <!-- ./Preloader -->
    
    <!-- header -->
    <header class="navbar-fixed-top">
        <nav>
            <ul>
                <!-- <li><a href="./index.html">Home</a></li> -->
                <li><a href="./index.html#about">About</a></li>
                <li><a href="./index.html#experience">Experience</a></li>
                <li><a href="./index.html#projects">Projects</a></li>
                <li><a href="./index.html#contact">Contact</a></li>
            </ul>
        </nav>
    </header>
    <!-- ./header -->


    <!-- project desc -->
    <div class="section" id="desc"></div>
        <div class="container">
            <div class="portfolio-padding">
                <div class="col-md-8 col-md-offset-2">
                    <!-- title -->
                    <h2>Mechatronics 2kHz and 25kHz Signal Detectors</h2>
                    <!-- sub title -->
                    <h3>UCSC - Mechatronics</h3>
                    <!-- TODO: image -->
                    <br /><br />
                    <!-- <div class="h-50"></div> -->

                    <h5>Project Description</h5>
                    <!-- <br /> -->
                    <p>The aim of this project is to create two analog sensors each detecting a specific signal. The first sensor is a track wire detector that can sense the presence of a wire carrying 24-26kHz current when it is 2 inches away or further.The second analog sensor is the beacon detector which must sense a 2kHz IR signal from at least 6 feet away. The beacon detector must also filter out any off-frequency noise and only allow 2kHz signals to pass. Both sensors were part of an assignment for ECE 118 and are implemented in the autonomous robot discussed <a href="https://www.linkedin.com/in/kmojabi/" target="_blank">here</a>.</p> 
                    <br />


                    <!-- Beacon Detector -->
                    <h5>The Beacon Detector</h5>
                    <p>The purpose of this circuit is to detect signal from at least 6 feet away and convert the signal to a digital output shown by an LED. This circuit was prototyped on a breadboard using MCP6004 quad Op-Amp chips, an LM339 comparator chip, and many resistors and capacitors. After prototyping, the circuit was soldered onto a perfboard. </p>
                    <figure>
                        <br /> <center><img src="img/signaldetectors/beacon-breadboardpng.png" alt="Beacon Detector on Breadboard" class="img-responsive"  width="75%" height="75%"/></center>
                        <figcaption><center>Beacon Detector on Breadboard</center><br /></figcaption>
                    </figure>
                    <p>Components list: 
                        <ul>
                            <li>MCP6004 Quad Op-Amp Chip </li>
                            <li>LM339 Comparator Chip </li>
                            <li>Phototransistor</li>
                            <li>LEDs</li>
                            <li>Assorted resistors and capacitors </li>
                        </ul>
                    </p>

                    <p>The analog circuit for the Beacon Detector uses these stages to detect a 2kHz IR signal at up to 10 feet away from the phototransistor. </p>
                    <figure>
                        <br /> <center><img src="img/signaldetectors/beacon-block.png" alt="Beacon Detector Block Diagram" class="img-responsive"  width="75%" height="75%"/></center>
                        <figcaption><center>Beacon Detector Block Diagram</center><br /></figcaption>
                    </figure>
                    <br />
                   
                    <!-- Transresistive -->
                    <h4>Transresistive Op-Amp </h4>
                    <figure>
                        <br /> <center><img src="img/signaldetectors/transresistive_c.png" alt="Transresistive Circuit Diagram" class="img-responsive"  width="50%" height="50%"/></center>
                        <figcaption><center>Transresistive Circuit Diagram</center><br /></figcaption>
                    </figure>
                    <p>The transresistive Op-Amp takes is the first stage of the beacon detector circuit in which the 2kHz input from the phototransistor is turned into a linear square wave as below. </p>
                    <br />
                    <figure>
                        <br /> <center><img src="img/signaldetectors/transresistive_t.png" alt="Transresistive Stage Output" class="img-responsive"  width="75%" height="75%"/></center>
                        <figcaption><center>Transresistive Stage Output</center><br /></figcaption>
                    </figure>
                    <br />
                    <!-- /Transresistive -->

                    <!-- Non-Inverting Amplification  -->
                    <h4>Non-Inverting Amplification  </h4>
                    <p>After this, the signal goes through 4 stages of non-inverting amplification, each amplifying by a factor of 11.  The amplification is done by using an Op-Amp in the non-inverting amplifier configuration as shown in the image below:</p> 
                    <figure>
                        <br /> <center><img src="img/signaldetectors/gain_c.png" alt="Non-Inverting Amplification Circuit" class="img-responsive"  width="50%" height="50%"/></center>
                        <figcaption><center>Non-Inverting Amplification Circuit Diagram</center><br /></figcaption>
                    </figure>
                    <p>The image below shows a scope trace of a signal amplified by a factor of 2: </p>
                    <br />
                    <figure>
                        <br /> <center><img src="img/signaldetectors/gain_t.png" alt="Non-Inverting Amplification Output" class="img-responsive"  width="50%" height="50%"/></center>
                        <figcaption><center>Non-Inverting Amplification Output</center><br /></figcaption>
                    </figure>
                    <br />
                    <!-- /Non-Inverting Amplification  -->

                    <!-- Bandpass Filter -->
                    <h4>Bandpass Filter</h4>
                    <p>Then, the signal is filtered to reject any signal that has a frequency other than 2kHz. The filter designed for this circuit is a 4th order Butterworth Bandpass filter. The center frequency is 2kHz with cutoff frequencies of 1.8kHz and 2.2kHz. The circuit for the filter is shown below as well as its simulated response: </p> 
                    <figure>
                        <br /> <center><img src="img/signaldetectors/bandpass2k_c.png" alt="4th Order Butterworth Bandpass Filter Circuit" class="img-responsive"  width="100%" height="100%"/></center>
                        <figcaption><center>4th Order Butterworth Bandpass Filter Circuit Diagram</center><br /></figcaption>
                    </figure>
                    <p>Note that the filter also uses virtual ground to avoid cutting off the lower part of the wave. This filter was tested with 1.5kHz and 2.5kHz IR noise and successfully attenuated them.</p>
                    <br />
                    <figure>
                        <br /> <center><img src="img/signaldetectors/bandpass2k_t.png" alt="Bandpass Filter Response" class="img-responsive"  width="50%" height="50%"/></center>
                        <figcaption><center>Bandpass Filter Response</center><br /></figcaption>
                    </figure>
                    <br />
                    <!-- /Bandpass Filter -->

                    <!-- Peak Detector  -->
                    <h4>Peak Detector </h4>
                    <p>The next stage of this circuit is the peak detector, which is the first step in converting the signal from a sinusoidal wave to a digital HIGH or LOW. This stage uses a resistor and capacitor with an RC time constant of 10ms to detect the peaks of the wave and hold the signal at the peak. This is done by quickly charging a small capacitor and allowing it to slowly discharge with a large resistor in parallel. The circuit shown below uses a buffer Op-Amp and a diode to force the current into the capacitor: </p> 
                    <!-- figures -->
                    <figure>
                        <br /> <center><img src="img/signaldetectors/peakbd_c.png" alt="Peak Detector Circuit" class="img-responsive"  width="75%" height="75%"/></center>
                        <figcaption><center>Peak Detector Circuit Diagram</center><br /></figcaption>
                    </figure>
                    <p>The trace below shows the peak detector following an input sinusoidal signal. </p>
                    <br />
                    <figure>
                        <br /> <center><img src="img/signaldetectors/peakbd_t.png" alt="Peak Detector Scope Trace" class="img-responsive"  width="50%" height="50%"/></center>
                        <figcaption><center>Peak Detector Scope Trace</center><br /></figcaption>
                    </figure>
                    <br />
                    <!-- /Peak Detector -->

                    <!-- Comparator and LED Buffer -->
                    <h4>Comparator and LED Buffer</h4>
                    <p>The final stages of this circuit are used to complete the analog to digital conversion. The peak detector’s output is routed to the comparator which acts as a Schmitt trigger. The comparator has two threshold bounds. If a signal exceeds the high thresholds, the comparator outputs a LOW 0 volts. If a signal is below the lower threshold, the comparator outputs HIGH 3.3V. Combining this with an LED in a pull-up configuration effectively inverts the comparator’s output and tells when a signal is detected. The comparator configuration as well as the LED Buffer are shown below </p> 
                    <!-- figures -->
                    <figure>
                        <br /> <center><img src="img/signaldetectors/comp_c2.png" alt="Comparator Circuit" class="img-responsive"  width="50%" height="50%"/></center>
                        <figcaption><center>Comparator Circuit Diagram</center><br /></figcaption>
                    </figure>
                    <br />
                    <figure>
                        <br /> <center><img src="img/signaldetectors/comp_c.png" alt="LED Buffer Circuit" class="img-responsive"  width="50%" height="50%"/></center>
                        <figcaption><center>LED Buffer Circuit Diagram</center><br /></figcaption>
                    </figure>
                    <br />
                    <!-- /Comparator and LED Buffer -->

                    <!-- Other components -->
                    <h4>Other Components</h4>
                    <p>It is important to note that some AC coupling was added after each major stage to remove the DC component from AC signals. This was done by implementing a high pass filter with a low cutoff frequency of ~160Hz.</p> 
                    <!-- figures -->
                    <figure>
                        <br /> <center><img src="img/signaldetectors/ac_c.png" alt="AC Coupling Circuit" class="img-responsive"  width="25%" height="25%"/></center>
                        <figcaption><center>AC Coupling Circuit Diagram</center><br /></figcaption>
                    </figure>
                    <br />

                    <p>Another vital component is the split rail buffer. This provides the necessary 1.65V to offset the AC signals and prevent losing the lower half of the sinusoidal waves.</p> 
                    <!-- figures -->
                    <figure>
                        <br /> <center><img src="img/signaldetectors/splitrail.png" alt="Split Rail Buffer Circuit" class="img-responsive"  width="75%" height="75%"/></center>
                        <figcaption><center>Split Rail Buffer Circuit Diagram</center><br /></figcaption>
                    </figure>
                    <br />
                    <!-- /Other Components -->
                    <!-- /Beacon Detector -->


                    <!-- Track Wire -->
                    <h5>The Track Wire Detector </h5>
                    <!-- Track Wire Intro -->
                    <p>The Track Wire Detector uses similar circuit components to detect current running through a wire at 24-26kHz. This was also first prototyped on a breadboard then soldered onto a perfboard using the same components as the Beacon Detector.</p>
                    <figure>
                        <br /> <center><img src="img/signaldetectors/track-breadboardpng.png" alt="Track Wire on Breadboard" class="img-responsive"  width="75%" height="75%"/></center>
                        <figcaption><center>Track Wire on Breadboard</center><br /></figcaption>
                    </figure>
                    <p>The analog circuit for the Track Wire Detector uses these stages to detect a 24-26kHz signal that is 2” away from the input stage. The circuit is very similar to the Beacon Detector discussed above with a few notable differences.</p>
                    <figure>
                        <br /> <center><img src="img/signaldetectors/trackwire-block.png" alt="Track Wire Block Diagram" class="img-responsive"  width="75%" height="75%"/></center>
                        <figcaption><center>Track Wire Block Diagram</center><br /></figcaption>
                    </figure>
                    <!-- /Track Wire Intro -->

                    <!-- Tank Circuit  -->
                    <h4>Tank Circuit</h4>
                    <p>The first stage of the detector is the tank circuit. It uses a 10mH inductor to pick up the signals from the wires and charge/discharge a 3.3nF capacitor. The result is a sine wave that oscillates at the frequency of the wire. </p> 
                    <!-- figures -->
                    <figure>
                        <br /> <center><img src="img/signaldetectors/tank_c.png" alt="Tank Circuit" class="img-responsive"  width="75%" height="75%"/></center>
                        <figcaption><center>Tank Circuit Diagram</center><br /></figcaption>
                    </figure>
                    <br />
                    <!-- /Tank Circuit -->


                    <!-- Non-Inverting Amplification -->
                    <h4>Non-Inverting Amplification</h4>
                    <p>This circuit required 3 cascaded stages of 11 gain to detect the signal at a 2 inch distance.</p> 
                    <br />
                    <!-- /Non-Inverting Amplification -->


                    <!-- Peak Detector -->
                    <h4>Peak Detector</h4>
                    <p>The peak detector remains in the same configuration however, since the input signal has a different frequency averaging at 25kHz, the time constant must be modified to track this new signal. The period of a 25kHz signal is 0.00004s. The time constant for the peak detector should be at least 5 times the period. However, through experimentation, it was found that a time constant of 0.001s gives the best result. While this does delay the system’s response, it allows for the best peak tracking.  </p> 
                    <!-- figures -->
                    <figure>
                        <br /> <center><img src="img/signaldetectors/peaktw_c.png" alt="Track Wire Peak Detector" class="img-responsive"  width="75%" height="75%"/></center>
                        <figcaption><center>Track Wire Peak Detector</center><br /></figcaption>
                    </figure>
                    <br />
                    <!-- /Peak Detector -->    

                    <!-- Noise Filtering -->
                    <h4>Noise Filtering</h4>
                    <p>Due to noise from DC motors and other sources, a filter was implemented into the circuit during the final project. The filter chosen is a Butterworth Bandpass with centered at 25kHz. The circuit is displayed below:</p> 
                    <!-- figures -->
                    <figure>
                        <br /> <center><img src="img/signaldetectors/twband_c.png" alt="Track Wire Band Pass Filter" class="img-responsive"  width="75%" height="75%"/></center>
                        <figcaption><center>Track Wire Band Pass Filter Circuit Diagram</center><br /></figcaption>
                    </figure>
                    <br />
                    <!-- /Noise Filtering -->

                    <!-- Comparator -->
                    <h4>Comparator</h4>
                    <p>This circuit uses the LM399 to make a comparator with 1.0V and 1.8V thresholds. The circuit is similar to the comparator above with the following differences:</p>
                    <p>R11 = 800k ohm</p>
                    <p>R12 = 533k ohm</p>
                    <!-- /Comparator -->

                    <!-- /Track Wire -->

                </div>

            



            </div>
        </div>
    <!-- ./project desc -->


    <!-- links -->
    <div class="h-50"></div>
    <div class="h-50"></div>
    <center><a href="./index.html#projects"><h5><u>See More Projects</u></h5></a></center>
    <br />
    <center><a href="./index.html#contact"><h5><u>Contact</u></h5></a></center>
    <div class="h-50"></div>
    <div class="h-50"></div>
    <!-- ./links -->
    
    
    <!-- jQuery -->
    <script src="js/jquery.js"></script>
    <!--  plugins  -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/jquery.form.js"></script>
    <script src="js/jquery.validate.min.js"></script>

    <!--  main script  -->
    <script src="js/custom.js"></script>
</body>

</html>
